# Language setting
language: clojure

# Defines version of Leiningen used for automating Clojure builds
lein:
  - 2.4.2

# Create directories for test and coverage reports
before_script:
  - mkdir -p shippable/testresults
  - mkdir -p shippable/codecoverage

# Running the test with Leiningen
script:
  - cd sample
  - lein test
  - lein cloverage --emma-xml

after_script:
  - mv $PWD/sample/target/coverage/coverage.xml $PWD/shippable/codecoverage/